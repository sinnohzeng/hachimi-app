diff --git a/android/build.gradle b/android/build.gradle
index ebe5578..b844632 100644
--- a/android/build.gradle
+++ b/android/build.gradle
@@ -37,20 +37,14 @@ android {
     // declared in /android/app/build.gradle file of the Flutter project.
     // Replace it with a version number if this plugin requires a specfic NDK version.
     // (e.g. ndkVersion "23.1.7779620")
-    ndkVersion android.ndkVersion
+    ndkVersion "29.0.13846066"
 
     // Invoke the shared CMake build with the Android Gradle Plugin.
     externalNativeBuild {
         cmake {
             path "../src/CMakeLists.txt"
 
-            // The default CMake version for the Android Gradle Plugin is 3.10.2.
-            // https://developer.android.com/studio/projects/install-ndk#vanilla_cmake
-            //
-            // The Flutter tooling requires that developers have CMake 3.10 or later
-            // installed. You should not increase this version, as doing so will cause
-            // the plugin to fail to compile for some customers of the plugin.
-            // version "3.10.2"
+            version "3.22.1"
         }
     }
 
@@ -65,5 +59,22 @@ android {
         }
         minSdkVersion 23
         targetSdkVersion 34
+
+        externalNativeBuild {
+            cmake {
+                cppFlags "-std=c++17", "-fexceptions", "-frtti"
+                arguments "-DBUILD_SHARED_LIBS=ON",
+                        "-DLLAMA_CURL=OFF",
+                        "-DLLAMA_BUILD_TESTS=OFF",
+                        "-DLLAMA_BUILD_EXAMPLES=OFF",
+                        "-DLLAMA_BUILD_SERVER=OFF",
+                        "-DLLAMA_BUILD_TOOLS=ON",
+                        "-DGGML_OPENCL=ON",
+                        "-DGGML_OPENCL_EMBED_KERNELS=ON",
+                        "-DGGML_OPENCL_USE_ADRENO_KERNELS=ON",
+                        "-DANDROID_STL=c++_shared",
+                        "-DLLAMA_NATIVE=OFF"
+            }
+        }
     }
 }
diff --git a/android/llamalib/build.gradle b/android/llamalib/build.gradle
index 041dfb2..952d9c0 100644
--- a/android/llamalib/build.gradle
+++ b/android/llamalib/build.gradle
@@ -24,7 +24,6 @@ android {
                         "-DLLAMA_BUILD_EXAMPLES=OFF",
                         "-DLLAMA_BUILD_SERVER=OFF",
                         "-DLLAMA_BUILD_TOOLS=ON",
-                        "-DCMAKE_PROJECT_INCLUDE=/Users/adel/Workspace/llama_cpp_dart/darwin/no_bundle.cmake",
                         // GPU backend: OpenCL instead of Vulkan
                         "-DGGML_OPENCL=ON",
                         "-DGGML_OPENCL_EMBED_KERNELS=ON",
diff --git a/pubspec.yaml b/pubspec.yaml
index faff1a5..fcfb57c 100644
--- a/pubspec.yaml
+++ b/pubspec.yaml
@@ -8,6 +8,16 @@ environment:
   sdk: '>=3.2.0 <4.0.0'
   flutter: ">=1.20.0"
 
+flutter:
+  plugin:
+    platforms:
+      android:
+        ffiPlugin: true
+      linux:
+        ffiPlugin: true
+      macos:
+        ffiPlugin: true
+
 dependencies:
   flutter:
     sdk: flutter
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index cd67c3f..caec2da 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -34,6 +34,21 @@ if (ANDROID)
         llama.cpp/tools/mtmd/mtmd-audio.cpp
         llama.cpp/tools/mtmd/clip.cpp
         llama.cpp/tools/mtmd/mtmd-helper.cpp
+        llama.cpp/tools/mtmd/models/cogvlm.cpp
+        llama.cpp/tools/mtmd/models/conformer.cpp
+        llama.cpp/tools/mtmd/models/glm4v.cpp
+        llama.cpp/tools/mtmd/models/internvl.cpp
+        llama.cpp/tools/mtmd/models/kimivl.cpp
+        llama.cpp/tools/mtmd/models/llama4.cpp
+        llama.cpp/tools/mtmd/models/llava.cpp
+        llama.cpp/tools/mtmd/models/minicpmv.cpp
+        llama.cpp/tools/mtmd/models/mobilenetv5.cpp
+        llama.cpp/tools/mtmd/models/pixtral.cpp
+        llama.cpp/tools/mtmd/models/qwen2vl.cpp
+        llama.cpp/tools/mtmd/models/qwen3vl.cpp
+        llama.cpp/tools/mtmd/models/siglip.cpp
+        llama.cpp/tools/mtmd/models/whisper-enc.cpp
+        llama.cpp/tools/mtmd/models/youtuvl.cpp
     )
 
     # Include directories
